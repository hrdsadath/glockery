{"ast":null,"code":"import _objectSpread from\"C:/projects/crockery-ecommerce/glockery/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext(undefined);export{CartContext};const initialState={items:[],totalAmount:0};const cartReducer=(state,action)=>{switch(action.type){case'ADD_ITEM':const updatedItems=[...state.items,action.payload];const updatedTotalAmount=updatedItems.reduce((total,item)=>total+item.price,0);return _objectSpread(_objectSpread({},state),{},{items:updatedItems,totalAmount:updatedTotalAmount});case'REMOVE_ITEM':const filteredItems=state.items.filter(item=>item.id!==action.payload.id);const newTotalAmount=filteredItems.reduce((total,item)=>total+item.price,0);return _objectSpread(_objectSpread({},state),{},{items:filteredItems,totalAmount:newTotalAmount});case'CLEAR_CART':return initialState;default:return state;}};export const CartProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(cartReducer,initialState,initial=>{// Initialize from localStorage\ntry{const savedCart=localStorage.getItem('cart');if(savedCart){const parsedCart=JSON.parse(savedCart);return{items:parsedCart,totalAmount:parsedCart.reduce((total,item)=>total+item.price,0)};}}catch(error){console.error('Error loading cart from localStorage:',error);}return initial;});// Save to localStorage whenever state changes\nuseEffect(()=>{localStorage.setItem('cart',JSON.stringify(state.items));},[state.items]);const addItem=item=>{dispatch({type:'ADD_ITEM',payload:item});};const removeItem=id=>{dispatch({type:'REMOVE_ITEM',payload:{id}});};const clearCart=()=>{dispatch({type:'CLEAR_CART'});};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{state,addItem,removeItem,clearCart},children:children});};export const useCart=()=>{return useContext(CartContext);};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsx","_jsx","CartContext","undefined","initialState","items","totalAmount","cartReducer","state","action","type","updatedItems","payload","updatedTotalAmount","reduce","total","item","price","_objectSpread","filteredItems","filter","id","newTotalAmount","CartProvider","_ref","children","dispatch","initial","savedCart","localStorage","getItem","parsedCart","JSON","parse","error","console","setItem","stringify","addItem","removeItem","clearCart","Provider","value","useCart"],"sources":["C:/projects/crockery-ecommerce/glockery/frontend/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, ReactNode, useEffect } from 'react';\n\ninterface CartItem {\n    id: string;\n    name: string;\n    description: string;\n    price: number;\n    imageUrl: string;\n    quantity?: number;\n}\n\ninterface CartState {\n    items: CartItem[];\n    totalAmount: number;\n}\n\ninterface CartContextType {\n    state: CartState;\n    addItem: (item: CartItem) => void;\n    removeItem: (id: string) => void;\n    clearCart: () => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport { CartContext };\n\nconst initialState: CartState = {\n    items: [],\n    totalAmount: 0,\n};\n\ninterface CartAction {\n    type: 'ADD_ITEM' | 'REMOVE_ITEM' | 'CLEAR_CART';\n    payload?: CartItem | { id: string };\n}\n\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\n    switch (action.type) {\n        case 'ADD_ITEM':\n            const updatedItems = [...state.items, action.payload as CartItem];\n            const updatedTotalAmount = updatedItems.reduce((total: number, item: CartItem) => total + item.price, 0);\n            return {\n                ...state,\n                items: updatedItems,\n                totalAmount: updatedTotalAmount,\n            };\n        case 'REMOVE_ITEM':\n            const filteredItems = state.items.filter((item: CartItem) => item.id !== (action.payload as { id: string }).id);\n            const newTotalAmount = filteredItems.reduce((total: number, item: CartItem) => total + item.price, 0);\n            return {\n                ...state,\n                items: filteredItems,\n                totalAmount: newTotalAmount,\n            };\n        case 'CLEAR_CART':\n            return initialState;\n        default:\n            return state;\n    }\n};\n\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n    const [state, dispatch] = useReducer(cartReducer, initialState, (initial) => {\n        // Initialize from localStorage\n        try {\n            const savedCart = localStorage.getItem('cart');\n            if (savedCart) {\n                const parsedCart = JSON.parse(savedCart);\n                return {\n                    items: parsedCart,\n                    totalAmount: parsedCart.reduce((total: number, item: CartItem) => total + item.price, 0),\n                };\n            }\n        } catch (error) {\n            console.error('Error loading cart from localStorage:', error);\n        }\n        return initial;\n    });\n\n    // Save to localStorage whenever state changes\n    useEffect(() => {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n    }, [state.items]);\n\n    const addItem = (item: CartItem) => {\n        dispatch({ type: 'ADD_ITEM', payload: item });\n    };\n\n    const removeItem = (id: string) => {\n        dispatch({ type: 'REMOVE_ITEM', payload: { id } });\n    };\n\n    const clearCart = () => {\n        dispatch({ type: 'CLEAR_CART' });\n    };\n\n    return (\n        <CartContext.Provider value={{ state, addItem, removeItem, clearCart }}>\n            {children}\n        </CartContext.Provider>\n    );\n};\n\nexport const useCart = () => {\n    return useContext(CartContext);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}