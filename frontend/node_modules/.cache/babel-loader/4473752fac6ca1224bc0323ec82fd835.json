{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\crockery-ecommerce\\\\frontend\\\\src\\\\contexts\\\\CartContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext(undefined);\nexport { CartContext };\nconst initialState = {\n  items: [],\n  totalAmount: 0\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      const updatedItems = [...state.items, action.payload];\n      const updatedTotalAmount = updatedItems.reduce((total, item) => total + item.price, 0);\n      return {\n        ...state,\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n      };\n    case 'REMOVE_ITEM':\n      const filteredItems = state.items.filter(item => item.id !== action.payload.id);\n      const newTotalAmount = filteredItems.reduce((total, item) => total + item.price, 0);\n      return {\n        ...state,\n        items: filteredItems,\n        totalAmount: newTotalAmount\n      };\n    case 'CLEAR_CART':\n      return initialState;\n    default:\n      return state;\n  }\n};\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, initialState, initial => {\n    // Initialize from localStorage\n    try {\n      const savedCart = localStorage.getItem('cart');\n      if (savedCart) {\n        const parsedCart = JSON.parse(savedCart);\n        return {\n          items: parsedCart,\n          totalAmount: parsedCart.reduce((total, item) => total + item.price, 0)\n        };\n      }\n    } catch (error) {\n      console.error('Error loading cart from localStorage:', error);\n    }\n    return initial;\n  });\n\n  // Save to localStorage whenever state changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state.items));\n  }, [state.items]);\n  const addItem = item => {\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: item\n    });\n  };\n  const removeItem = id => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: {\n        id\n      }\n    });\n  };\n  const clearCart = () => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      state,\n      addItem,\n      removeItem,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n};\n_s(CartProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartContext);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsxDEV","_jsxDEV","CartContext","undefined","initialState","items","totalAmount","cartReducer","state","action","type","updatedItems","payload","updatedTotalAmount","reduce","total","item","price","filteredItems","filter","id","newTotalAmount","CartProvider","children","_s","dispatch","initial","savedCart","localStorage","getItem","parsedCart","JSON","parse","error","console","setItem","stringify","addItem","removeItem","clearCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/projects/crockery-ecommerce/frontend/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, ReactNode, useEffect } from 'react';\n\ninterface CartItem {\n    id: string;\n    name: string;\n    price: number;\n    quantity?: number;\n}\n\ninterface CartState {\n    items: CartItem[];\n    totalAmount: number;\n}\n\ninterface CartContextType {\n    state: CartState;\n    addItem: (item: CartItem) => void;\n    removeItem: (id: string) => void;\n    clearCart: () => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport { CartContext };\n\nconst initialState: CartState = {\n    items: [],\n    totalAmount: 0,\n};\n\ninterface CartAction {\n    type: 'ADD_ITEM' | 'REMOVE_ITEM' | 'CLEAR_CART';\n    payload?: CartItem | { id: string };\n}\n\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\n    switch (action.type) {\n        case 'ADD_ITEM':\n            const updatedItems = [...state.items, action.payload as CartItem];\n            const updatedTotalAmount = updatedItems.reduce((total: number, item: CartItem) => total + item.price, 0);\n            return {\n                ...state,\n                items: updatedItems,\n                totalAmount: updatedTotalAmount,\n            };\n        case 'REMOVE_ITEM':\n            const filteredItems = state.items.filter((item: CartItem) => item.id !== (action.payload as { id: string }).id);\n            const newTotalAmount = filteredItems.reduce((total: number, item: CartItem) => total + item.price, 0);\n            return {\n                ...state,\n                items: filteredItems,\n                totalAmount: newTotalAmount,\n            };\n        case 'CLEAR_CART':\n            return initialState;\n        default:\n            return state;\n    }\n};\n\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n    const [state, dispatch] = useReducer(cartReducer, initialState, (initial) => {\n        // Initialize from localStorage\n        try {\n            const savedCart = localStorage.getItem('cart');\n            if (savedCart) {\n                const parsedCart = JSON.parse(savedCart);\n                return {\n                    items: parsedCart,\n                    totalAmount: parsedCart.reduce((total: number, item: CartItem) => total + item.price, 0),\n                };\n            }\n        } catch (error) {\n            console.error('Error loading cart from localStorage:', error);\n        }\n        return initial;\n    });\n\n    // Save to localStorage whenever state changes\n    useEffect(() => {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n    }, [state.items]);\n\n    const addItem = (item: CartItem) => {\n        dispatch({ type: 'ADD_ITEM', payload: item });\n    };\n\n    const removeItem = (id: string) => {\n        dispatch({ type: 'REMOVE_ITEM', payload: { id } });\n    };\n\n    const clearCart = () => {\n        dispatch({ type: 'CLEAR_CART' });\n    };\n\n    return (\n        <CartContext.Provider value={{ state, addItem, removeItem, clearCart }}>\n            {children}\n        </CartContext.Provider>\n    );\n};\n\nexport const useCart = () => {\n    return useContext(CartContext);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}